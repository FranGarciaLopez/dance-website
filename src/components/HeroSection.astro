---
const { mobileImage, tabletImage, xlImage, heroTitle, heroSpan, heroSubtitle } =
  Astro.props;

const currentPath = Astro.url.pathname.replace(/\/$/, "").toLowerCase();

interface RouteClasses {
  [key: string]: {
    gradient: string;
    buttonBg: string;
    buttonHover: string;
    textGradient: string;
  };
}

const routeClasses: RouteClasses = {
  "/lady-style-elche": {
    gradient: "bg-gradient-ladyStyle",
    buttonBg: "bg-gradient-ladyStyle",
    buttonHover: "hover:shadow-lg",
    textGradient:
      "bg-gradient-to-r from-ladyStyle-gradient-from to-ladyStyle-gradient-to",
  },
  "/bachata-y-salsa-en-pareja-elche": {
    gradient: "bg-gradient-bachataSalsa",
    buttonBg: "bg-bachataSalsa-gradient-from",
    buttonHover: "hover:bg-bachataSalsa-gradient-to",
    textGradient:
      "bg-gradient-to-r from-bachataSalsa-gradient-from to-bachataSalsa-gradient-to",
  },
  "/": {
    gradient: "bg-gradient-main",
    buttonBg: "bg-main-gradient-from",
    buttonHover: "hover:bg-main-gradient-to",
    textGradient:
      "bg-gradient-to-r from-main-gradient-from to-main-gradient-to",
  },
};

const currentClasses = routeClasses[currentPath] ?? routeClasses["/"];

const routeTitles: Record<string, string> = {
  "/lady-style-elche": "Lady Style Elche",
  "/bachata-y-salsa-en-pareja-elche": "Bachata y Salsa en Pareja Elche",
  "/salsa-elche": "Salsa Elche",
};

const readableTitle = routeTitles[currentPath] ?? "vuestras clases";
const encodedMessage = encodeURIComponent(
  `Hola, quiero más información sobre ${readableTitle}`
);
const whatsappLink = `https://wa.me/34645089122?text=${encodedMessage}`;
---

<section
  id="hero"
  aria-label="Sección de bienvenida"
  role="banner"
  class="relative h-screen w-full flex flex-col items-end md:items-center justify-center text-center overflow-hidden"
>
  <!-- Imagen de fondo responsive -->
  <figure class="absolute inset-0 h-full w-full z-0 pointer-events-none">
    <picture>
      <source
        srcset={xlImage
          ? xlImage.replace("/upload/", "/upload/w_1920,c_fill,f_auto,q_auto/")
          : ""}
        media="(min-width: 1280px)"
        width="1920"
        height="1080"
      />
      <source
        srcset={tabletImage
          ? tabletImage.replace(
              "/upload/",
              "/upload/w_1024,c_fill,f_auto,q_auto/"
            )
          : ""}
        media="(min-width: 768px)"
        width="1024"
        height="768"
      />
      <img
        src={mobileImage
          ? mobileImage.replace(
              "/upload/",
              "/upload/w_768,c_fill,f_auto,q_auto/"
            )
          : ""}
        alt="Hero image"
        class="w-full h-full object-cover object-center brightness-75"
        width="768"
        height="1024"
        loading="eager"
        fetchpriority="high"
        decoding="async"
      />
    </picture>
  </figure>

  <!-- Contenido -->
  <div
    class="relative z-10 max-w-5xl w-fullpy-4 md:px-6 md:py-8
    bg-black/20 backdrop-blur-sm rounded-lg shadow-sm mx-auto text-white mt-16 md:mt-20 transition-all duration-300"
  >
    <h1 class="text-3xl md:text-4xl font-bold leading-tight mb-3 uppercase">
      {heroTitle}
      <span
        class={`block semibold ${currentClasses.textGradient} bg-clip-text text-transparent`}
      >
        {heroSpan}
      </span>
    </h1>

    <p
      class="text-sm md:text-lg text-white/80 mb-4 max-w-2xl mx-auto leading-relaxed"
    >
      {heroSubtitle}
    </p>

    <a
      href={whatsappLink}
      target="_blank"
      rel="noopener noreferrer"
      class={`inline-block ${currentClasses.buttonBg} text-white text-base font-semibold py-2 px-5 rounded-full shadow-md hover:scale-105 ${currentClasses.buttonHover} transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-freshEggplant-300/60`}
    >
      ¡Reserva tu clase con nosotros!
    </a>
  </div>
</section>
